version: 1
script:
  - rm AppDir -rf || true
  - kcalc_deb_path=$(ls /var/cache/apt/archives/kcalc_*)
  - dpkg-deb -x $kcalc_deb_path AppDir
AppDir:
  path: ./AppDir
  app_info:
    id: org.kde.kcalc
    name: KCalc
    icon: accessories-calculator
    version: latest
    exec: usr/bin/kcalc
    exec_args: $@
  runtime:
    env:
      APPDIR_LIBRARY_PATH: $APPDIR/usr/lib/x86_64-linux-gnu:$APPDIR/lib/x86_64-linux-gnu
  files:
    include:
      - /lib/x86_64-linux-gnu/libattr.so.1
      - /lib/x86_64-linux-gnu/libnss_compat.so.2
      - /lib/x86_64-linux-gnu/libnss_nis.so.2
      - /usr/lib/x86_64-linux-gnu/gconv/gconv-modules.cache
      - /usr/lib/x86_64-linux-gnu/libGLX_mesa.so.0
      - /usr/lib/x86_64-linux-gnu/libHalf.so.12
      - /usr/lib/x86_64-linux-gnu/libICE.so.6
      - /usr/lib/x86_64-linux-gnu/libIex-2_2.so.12
      - /usr/lib/x86_64-linux-gnu/libIlmImf-2_2.so.22
      - /usr/lib/x86_64-linux-gnu/libIlmThread-2_2.so.12
      - /usr/lib/x86_64-linux-gnu/libKF5Attica.so.5
      - /usr/lib/x86_64-linux-gnu/libKF5Bookmarks.so.5
      - /usr/lib/x86_64-linux-gnu/libKF5KIOWidgets.so.5
      - /usr/lib/x86_64-linux-gnu/libKF5Solid.so.5
      - /usr/lib/x86_64-linux-gnu/libKF5Style.so.5
      - /usr/lib/x86_64-linux-gnu/libQt5Qml.so.5
      - /usr/lib/x86_64-linux-gnu/libQt5XcbQpa.so.5
      - /usr/lib/x86_64-linux-gnu/libXcursor.so.1
      - /usr/lib/x86_64-linux-gnu/libXdamage.so.1
      - /usr/lib/x86_64-linux-gnu/libbreezecommon5.so.5
      - /usr/lib/x86_64-linux-gnu/libdouble-conversion.so.1
      - /usr/lib/x86_64-linux-gnu/libdrm_intel.so.1
      - /usr/lib/x86_64-linux-gnu/libdrm_nouveau.so.2
      - /usr/lib/x86_64-linux-gnu/libffi.so.6
      - /usr/lib/x86_64-linux-gnu/libicudata.so.60
      - /usr/lib/x86_64-linux-gnu/libicui18n.so.60
      - /usr/lib/x86_64-linux-gnu/libicuuc.so.60
      - /usr/lib/x86_64-linux-gnu/libkdeinit5_kcalc.so
      - /usr/lib/x86_64-linux-gnu/libwebp.so.6
      - /usr/lib/x86_64-linux-gnu/libwebpdemux.so.2
      - /usr/lib/x86_64-linux-gnu/libxcb-render-util.so.0
      - /usr/lib/x86_64-linux-gnu/libxcb-res.so.0
      - /usr/lib/x86_64-linux-gnu/libxcb-shape.so.0
      - /usr/lib/x86_64-linux-gnu/libxcb-util.so.1
      - /usr/lib/x86_64-linux-gnu/libxcb-xinerama.so.0
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/iconengines/KIconEnginePlugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/iconengines/libqsvgicon.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_eps.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_exr.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_hdr.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_kra.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_ora.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_pcx.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_pic.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_psd.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_ras.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_rgb.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_tga.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/kimg_xcf.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqgif.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqicns.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqico.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqjpeg.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqmng.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqsvg.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqtga.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqtiff.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqwbmp.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/imageformats/libqwebp.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/kf5/org.kde.kwindowsystem.platforms/KF5WindowSystemKWaylandPlugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/kf5/org.kde.kwindowsystem.platforms/KF5WindowSystemKWinPrivatePlugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/kf5/org.kde.kwindowsystem.platforms/KF5WindowSystemWaylandPlugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/kf5/org.kde.kwindowsystem.platforms/KF5WindowSystemX11Plugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforminputcontexts/libcomposeplatforminputcontextplugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforminputcontexts/libibusplatforminputcontextplugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforminputcontexts/libqtvirtualkeyboardplugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/KWinQpaPlugin.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqeglfs.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqlinuxfb.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqminimal.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqminimalegl.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqoffscreen.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqvnc.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqwayland-egl.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqwayland-generic.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqwayland-xcomposite-egl.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqwayland-xcomposite-glx.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platforms/libqxcb.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platformthemes/KDEPlasmaPlatformTheme.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/platformthemes/libqgtk3.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/xcbglintegrations/libqxcb-egl-integration.so
      - /usr/lib/x86_64-linux-gnu/qt5/plugins/xcbglintegrations/libqxcb-glx-integration.so
      - /usr/share/kcalc/scienceconstants.xml
      - /usr/share/kxmlgui5/kcalc/kcalcui.rc
      - /usr/share/locale/en/LC_MESSAGES/kcoreaddons5_qt.qm
      - /usr/share/locale/en/LC_MESSAGES/kjobwidgets5_qt.qm
      - /usr/share/locale/en/LC_MESSAGES/kwidgetsaddons5_qt.qm
      - /usr/share/mime/generic-icons
      - /usr/share/plasma/look-and-feel/org.kde.breeze.desktop/contents/defaults
      - /usr/share/qt5/translations/qt_en.qm
    exclude:
      - usr/share/man
      - usr/share/doc/*/README.*
      - usr/share/doc/*/changelog.*
      - usr/share/doc/*/NEWS.*
      - usr/share/doc/*/TODO.*
  test:
    fedora:
      image: appimagecrafters/tests-env:fedora-30
      command: ./AppRun
      use_host_x: true
    debian:
      image: appimagecrafters/tests-env:debian-stable
      command: ./AppRun
      use_host_x: true
    arch:
      image: appimagecrafters/tests-env:archlinux-latest
      command: ./AppRun
      use_host_x: true
    centos:
      image: appimagecrafters/tests-env:centos-7
      command: ./AppRun
      use_host_x: true
    ubuntu:
      image: appimagecrafters/tests-env:ubuntu-xenial
      command: ./AppRun
      use_host_x: true
AppImage:
  arch: x86_64
  update-information: None
  sign-key: None
